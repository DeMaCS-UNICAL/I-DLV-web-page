<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>About &mdash; idlv 0.0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="About" href="../Incremental/i2dlv.html" />
    <link rel="prev" title="About" href="../Basic/basic.html" /> 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-222254999-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-222254999-1');
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y120GBTRZL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y120GBTRZL');
</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> idlv
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basic Version</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Basic/basic.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Basic/basic.html#syntax">Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Basic/basic.html#example">Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Version</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#download">Download</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#syntax">Syntax</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#external-computations">External Computations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python-external-atoms">Python External Atoms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#syntax-and-intuitive-semantics">Syntax and Intuitive Semantics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-terms-mapping-policy">Output Terms Mapping Policy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#native-directives">Native Directives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sql-directives">SQL Directives</a></li>
<li class="toctree-l4"><a class="reference internal" href="#import-sql-directive">Import SQL Directive</a></li>
<li class="toctree-l4"><a class="reference internal" href="#export-sql-directives">Export SQL Directives</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sparql-directives">SPARQL Directives</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#example">Example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">External Computations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-compute-sum">Example Compute Sum</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Incremental Version</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Incremental/i2dlv.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Incremental/i2dlv.html#syntax">Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Incremental/i2dlv.html#example">Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contact Us</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Contact/contact.html">Contacts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contact/contact.html#core-team">Core Team</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">idlv</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>About</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Advanced/advanced.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Advanced Version</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#download">Download</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#syntax">Syntax</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#external-computations">External Computations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python-external-atoms">Python External Atoms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#native-directives">Native Directives</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#example">Example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">External Computations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-compute-sum">Example Compute Sum</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="about">
<h1>About<a class="headerlink" href="#about" title="Permalink to this headline"></a></h1>
<ul>
<li><p>The above listed static versions do not support I-DLV advanced features such as external atoms and SPARQL/SQL directives for importing/exporting data.
Such features are supported by the following standalone versions:</p>
<blockquote>
<div><ul class="simple">
<li><p>Standalone executable of I-DLV for Linux x86-64 in which semantics of external atoms can be specified via Python3.5 functions (you need to install <a class="reference external" href="https://www.python.org">Python</a> 3.5 to execute this version):</p></li>
<li><p>Standalone executable of I-DLV for Linux x86-64 in which semantics of external atoms can be specified via Python 2.7 functions (you need to install <a class="reference external" href="https://www.python.org">Python</a> 2.7 to execute this version):</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="section" id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>You can download the latest stable release of I-DLV <a class="reference external" href="https://github.com/DeMaCS-UNICAL/I-DLV/releases">in the release section of github</a>.</p></li>
</ul>
</div>
</div>
<div class="section" id="syntax">
<span id="advancedsyntax"></span><h1>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline"></a></h1>
<div class="section" id="external-computations">
<h2>External Computations<a class="headerlink" href="#external-computations" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>I-DLV is intended as a tool to ease the interoperability of ASP with external sources of knowledge. To comply with this purpose, its input language, still supporting <a class="reference external" href="https://arxiv.org/abs/1911.04326">ASP-Core-2</a>, has also been enriched with explicit constructs for demanding computations to external components as well as internally handled facilities for handling list terms, strings, etc.</p></li>
<li><p>Further details are reported hereafter and in the related literature:</p></li>
<li><p>Francesco Calimeri, Davide Fuscà, Simona Perri, Jessica Zangari. External Computations and Interoperability in the New DLV Grounder.</p></li>
</ul>
<div class="section" id="python-external-atoms">
<h3>Python External Atoms<a class="headerlink" href="#python-external-atoms" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Users can provide via <a class="reference external" href="https://www.python.org">Python</a> scripts with <code class="docutils literal notranslate"><span class="pre">.py</span></code> extension externally defined functionalities.</p></li>
</ul>
<div class="section" id="syntax-and-intuitive-semantics">
<h4>Syntax and Intuitive Semantics<a class="headerlink" href="#syntax-and-intuitive-semantics" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li><p>I-DLV supports the call to external sources of computations within ASP programs by means of external atoms in the rule bodies.</p></li>
</ul>
<p>An external atom is of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">p</span> <span class="p">(</span><span class="n">t_0</span> <span class="p">,</span><span class="o">...</span><span class="p">,</span> <span class="n">t_n</span> <span class="p">;</span> <span class="n">u_0</span> <span class="p">,</span><span class="o">...</span><span class="p">,</span> <span class="n">u_m</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">p</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">external</span> <span class="n">predicate</span> <span class="p">(</span><span class="n">the</span> <span class="n">name</span> <span class="n">must</span> <span class="n">start</span> <span class="k">with</span> <span class="n">a</span> <span class="o">&amp;</span> <span class="n">symbol</span><span class="p">)</span>
<span class="n">t_0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">t_n</span> <span class="n">are</span> <span class="nb">input</span> <span class="n">terms</span>
<span class="n">u_0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">u_m</span> <span class="n">are</span> <span class="n">output</span> <span class="n">terms</span>
<span class="n">a</span> <span class="n">semicolon</span> <span class="n">symbol</span> <span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span> <span class="n">separates</span> <span class="nb">input</span> <span class="kn">from</span> <span class="nn">output</span> <span class="n">terms</span><span class="o">.</span>
</pre></div>
</div>
<p>Note that each instance of an external predicate must appear with the same number of input and output terms throughout the program.</p>
<p>Intuitively, output terms are computed on the basis of the input ones, according to a semantics which is externally defined via <a class="reference external" href="https://www.python.org">Python</a> scripts.</p>
<p>In particular, for each external predicate <code class="docutils literal notranslate"><span class="pre">&amp;p</span></code> featuring <code class="docutils literal notranslate"><span class="pre">n/m</span></code> input and output terms, respectively, the user must define a <a class="reference external" href="https://www.python.org">Python</a> function whose name is <code class="docutils literal notranslate"><span class="pre">p</span></code>, and featuring <code class="docutils literal notranslate"><span class="pre">n/m</span></code> input and output parameters, respectively. The function has to be compliant with <a class="reference external" href="https://www.python.org">Python</a> version 3.</p>
<p>External atoms can be both functional and relational, i.e., they can return a single tuple or a set of tuples, as output.</p>
<p>Notably, the functions defining the semantics of external atoms appearing in an input program can be defined in a unique <a class="reference external" href="https://www.python.org">Python</a> file or multiple ones, and the <a class="reference external" href="https://www.python.org">Python</a> files can be given to I-DLV without no particular command-line option.</p>
</div>
<div class="section" id="output-terms-mapping-policy">
<h4>Output Terms Mapping Policy<a class="headerlink" href="#output-terms-mapping-policy" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li><p>Each value returned by the <a class="reference external" href="https://www.python.org">Python</a> function defining an external predicate can be of one of these <em>types</em>: <strong>numeric</strong>, <strong>boolean</strong> or <strong>string</strong>.</p></li>
<li><p>These values are internally mapped to ground values accordingly to the following default policy: a integer returned value is mapped to a corresponding <strong>numeric constant</strong>; all other values are either associate to a <strong>symbolic constant</strong>, if the form is compatible according to the <a class="reference external" href="https://arxiv.org/abs/1911.04326">ASP-Core-2</a> syntax, otherwise are associated to a <strong>string constant</strong> in case of failure.</p></li>
</ul>
<p>However, I-DLV allows the user to customize the mapping policy of a particular external predicate by means of a [directive] statement of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#external_predicate_conversion(&amp;p,type:T_1, ..., T_N)</span>
</pre></div>
</div>
<p>that specifies the sequence of conversion types for an external predicate &amp;p featuring n output terms.</p>
<p>A conversion type can be:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>U_INT, the output value is converted to an unsigned integer;</p></li>
<li><p>UT_INT, the output value is truncated to an unsigned integer;</p></li>
<li><p>UR_INT, the output value is rounded to an unsigned integer;</p></li>
<li><p>T_INT, the output value is truncated to an integer;</p></li>
<li><p>R_INT, the output value is rounded to an integer;</p></li>
<li><p>CONST, the output value is converted to a string without quotes;</p></li>
<li><p>Q_CONST, the output value is converted to a string with quotes.</p></li>
</ol>
</div></blockquote>
<p>In cases <code class="docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">2</span></code>, <code class="docutils literal notranslate"><span class="pre">3</span></code> the value is mapped to a <strong>numeric term</strong>, in case <code class="docutils literal notranslate"><span class="pre">4</span></code> to a <strong>symbolic constant</strong>, while in case <code class="docutils literal notranslate"><span class="pre">5</span></code> in a <strong>string constant</strong>. Such directives have a global impact: they are applied to each occurrence of the external predicate they are referring to, and can be specified at any point within an ASP program.</p>
<p>We remark that, in previous I-DLV versions, this conversion policies were allowed by means of global annotations of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="nd">@global_external_predicate_conversion</span><span class="p">(</span><span class="nd">@predicate</span><span class="o">=&amp;</span><span class="n">p</span><span class="p">,</span><span class="nd">@type</span><span class="o">=</span><span class="nd">@T_1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="nd">@T_N</span><span class="p">)</span>
</pre></div>
</div>
<p>with an identical meaning.</p>
<p><a class="reference internal" href="#computesum"><span class="std std-ref">Example Compute Sum</span></a>.</p>
</div>
</div>
<div class="section" id="native-directives">
<h3>Native Directives<a class="headerlink" href="#native-directives" title="Permalink to this headline"></a></h3>
<div class="section" id="sql-directives">
<h4>SQL Directives<a class="headerlink" href="#sql-directives" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li><p>We extend I-DLV with an ODBC interface by adding two new directives to import and export relations (predicates) from/to a DBMS.
These commands take a number of arguments providing the information needed for DBMS authentication, the relational predicate to import/export from/to the DBMS, and the name of the table in the DBMS.</p></li>
</ul>
</div>
<div class="section" id="import-sql-directive">
<h4>Import SQL Directive<a class="headerlink" href="#import-sql-directive" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">#import_sql</span></code> directive reads tuples from a specified table of a relational database and stores them as facts (EDB) with a predicate name <code class="docutils literal notranslate"><span class="pre">p</span></code> provided by the user.
The name of the imported atoms is set to <code class="docutils literal notranslate"><span class="pre">p</span></code>, and defines a part of the EDB program.
Further EDB predicates can be added by providing input via text files.
Since I-DLV supports only integer and constant data types, the <code class="docutils literal notranslate"><span class="pre">#import_sql</span></code> commands take a parameter which specifies a type conversion for every column of the table.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">#import_sql</span></code> command is of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#import_sql (databasename,&quot;username&quot;,&quot;password&quot;,&quot;query&quot;, predname[, typeConv]).</span>
</pre></div>
</div>
<p>where:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><cite>databasename</cite> is the name of the ODBC DSN (Data Source Name);</p></li>
<li><p><cite>username</cite> defines the name of the user who connects to the database (the string must be enclosed by ” “);</p></li>
<li><p><cite>password</cite> defines the password of that user (the string must be enclosed by ” “);</p></li>
<li><p><cite>query</cite> is an SQL statement that constructs the table that will be imported (and must be quoted by ” “);</p></li>
<li><p><cite>predname</cite> defines the name of the predicate that will be used;</p></li>
</ol>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">typeConv</span></code> is optional and specifies the conversion for mapping DBMS data types to I-DLV data type; it provides a conversion for each column imported by the database.</p>
<p>The typeConv parameter is a string with the following syntax:<code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">Conv</span> <span class="pre">[,</span> <span class="pre">Conv]</span></code>, where <code class="docutils literal notranslate"><span class="pre">type:</span></code> is a string constant and <code class="docutils literal notranslate"><span class="pre">Conv</span></code> is one of several conversion types:</p>
<blockquote>
<div><ul class="simple">
<li><p>U_INT: the column is converted to an unsigned integer;</p></li>
<li><p>UT_INT: the column is truncated to an unsigned integer;</p></li>
<li><p>UR_INT: the column is rounded to an unsigned integer;</p></li>
<li><p>T_INT: the column is truncated to an integer;</p></li>
<li><p>R_INT: the column is rounded to an integer;</p></li>
<li><p>CONST: the column is converted to a string without quotes;</p></li>
<li><p>Q_CONST: the column is converted to a string with quotes.</p></li>
</ul>
</div></blockquote>
<p>The number of the entries in the conversion list has to match the number of columns in the selected table. Strings converted as CONST should be valid <a class="reference external" href="https://arxiv.org/abs/1911.04326">ASP-Core-2</a> symbolic constants.</p>
</div>
<div class="section" id="export-sql-directives">
<h4>Export SQL Directives<a class="headerlink" href="#export-sql-directives" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">#export_sql</span></code> directive allows exporting the facts of a predicate in a DB. The <code class="docutils literal notranslate"><span class="pre">#export_sql</span></code> command comes in two variants.</p></li>
</ul>
<p>The first is of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#export_sql(databasename, &quot;username&quot;, &quot;password&quot;, predname, predarity, tablename).</span>
</pre></div>
</div>
<p>The second variant adds another parameter, <code class="docutils literal notranslate"><span class="pre">REPLACE</span> <span class="pre">where</span> <span class="pre">SQL-Condition</span></code>, which replaces the tuples in the table tablename for which SQL-Condition holds.
It allows adding tuples to the table without creating conflicts whenever such tuples would violate any integrity constraint of the database (e.g. duplicate values for a key attribute):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#export_sql(databasename,&quot;username&quot;,&quot;password&quot;, predname, predarity, tablename,&quot;REPLACE where SQL-Condition&quot;).</span>
</pre></div>
</div>
<p>where:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><cite>databasename</cite> is the name of the database server;</p></li>
<li><p><cite>username</cite> is the name of the user who connects to the database (the string must be enclosed by ” “);</p></li>
<li><p><cite>password</cite> provides the password of that user (the string must be enclosed by ” “);</p></li>
<li><p><cite>predname</cite> and <cite>predarity</cite> defines the predicate that will be exported;</p></li>
<li><p><cite>tablename</cite> defines the name of the table;</p></li>
<li><p><cite>REPLACE where SQL-Condition</cite> contains the key words <cite>REPLACE</cite> and where followed by an SQL-Condition which indicates the tuples which shall be deleted from the relational table before the export takes place.</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="sparql-directives">
<h4>SPARQL Directives<a class="headerlink" href="#sparql-directives" title="Permalink to this headline"></a></h4>
<ul>
<li><p>I-DLV supports two type different of directives:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>* The ``#import_local_sparql directive``: can be adopted to import data from a local RDF file.
* The ``#import_remote_sparql directive``: can be adopted to import data from a remote RDF End Point.
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>both directives store the imported date as <strong>facts (EDB)</strong> of <strong>a</strong> predicate <strong>p</strong> provided by the user.</p>
</div>
<ul class="simple">
<li><p>The behaviour of these directives is very similar to the <code class="docutils literal notranslate"><span class="pre">#import_sql</span></code> one.</p></li>
<li><p>The imported ground atoms define a part of the EDB program. Further EDB predicates can be added by providing input via text files.
Since I-DLV supports <strong>only integer</strong> and <strong>constant data types</strong>, the directives take a parameter which specifies a type conversion for every argument of the predicate p.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">#import_local_sparql</span></code> command is of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#import_local_sparql (“rdf_file”, “quey”,predname, predarity, [, typeConv]).</span>
</pre></div>
</div>
<p>While, the <code class="docutils literal notranslate"><span class="pre">#import_remote_sparql</span></code> command is of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#import_remote_sparql (“endpoint_url”, “quey”,predname, predarity, [, typeConv]).</span>
</pre></div>
</div>
<p>where:</p>
<blockquote>
<div><p>rdf_file is the path of the RDF file (the string must be enclosed by “ ”);
endpoint_url is the path of the RDF file (the string must be enclosed by “ ”);
query is an SPARQL statement (and must be quoted by ” “);
predname and predarity define, respectively, the name and the arity of the predicate that will be used;</p>
</div></blockquote>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">typeConv</span></code> is optional and specifies the conversion for mapping RDF data types to I-DLV data type. The conversion policy is the same of the <code class="docutils literal notranslate"><span class="pre">#import_sql</span> <span class="pre">directive</span></code>.</p></li>
<li><p>It is worth to point out that for the local import directive, rdf_file can be either a local or remote URL pointing to an RDF: in this latter case, the file is downloaded and treated as a local RDF file.
In this case the import is handled by a C++ module that builds the graph model in memory before performing the query.</p></li>
<li><p>The remote import instead in intended to query a remote endpoint and hence building the graph is up to the remote server.
Moreover, this directive is implemented through a rewriting strategy that adopts external atoms and, thus <a class="reference external" href="https://www.python.org">Python</a> functions, to perform the query.
More in details, for each remote SPARQL import directive, an auxiliary rule of the following form is added to the input program:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>predname(X_0, ...,X_N) :- &amp;sparqlEndPoint(“endpnt_url”,“query”;X_0, ...,X_N).
</pre></div>
</div>
</li>
<li><p>The head atom has <code class="docutils literal notranslate"><span class="pre">predname</span></code> as name, and contains a number of variables that corresponds to predarity, while the body contains an external atom <code class="docutils literal notranslate"><span class="pre">&amp;sparqlEndPoint</span></code> in charge of performing the remote query.</p></li>
</ul>
<p>Regards the efficiency, we observed that, typically, even if the remote directive involves the invocation of external <a class="reference external" href="https://www.python.org">Python</a> code, it might be convenient in case of large datasets with an intrinsic complex graph model.</p>
</div>
</div>
</div>
</div>
<div class="section" id="example">
<span id="advancedexample"></span><h1>Example<a class="headerlink" href="#example" title="Permalink to this headline"></a></h1>
<div class="section" id="id1">
<h2>External Computations<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h2>
<div class="section" id="example-compute-sum">
<span id="computesum"></span><h3>Example Compute Sum<a class="headerlink" href="#example-compute-sum" title="Permalink to this headline"></a></h3>
<p>As an example, let us consider the following program, that makes use of an external predicate with two input and one output terms:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">compute_sum</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span><span class="p">)</span> <span class="p">:</span><span class="o">-</span> <span class="o">&amp;</span><span class="nb">sum</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">;</span><span class="n">Z</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="n">X</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="n">Y</span><span class="p">),</span> <span class="n">X</span><span class="o">&lt;=</span><span class="n">Y</span><span class="o">.</span>
<span class="n">number</span><span class="p">(</span><span class="mf">1.</span><span class="o">.</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>A program containing this rule must come along with the proper definition of sum <a class="reference external" href="https://www.python.org">Python</a> function, as, for instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">X</span><span class="o">+</span><span class="n">Y</span>
</pre></div>
</div>
<p>When grounding the program I-DLV will invoke the <a class="reference external" href="https://www.python.org">Python</a> function sum for each couple of numbers, obtaining:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">compute_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="p">:</span><span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="p">:</span><span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="p">:</span><span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">;</span><span class="mi">4</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="p">:</span><span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">;</span><span class="mi">4</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="p">:</span><span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">;</span><span class="mi">5</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="p">:</span><span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">;</span><span class="mi">6</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">number</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>By applying the simplification process, since the program is a stratified and non-disjunctive, I-DLV will determine its unique answer set.</p>
<p>Hence, supposing that the ASP program is contained in a file called <code class="docutils literal notranslate"><span class="pre">file.asp</span></code>, while the <a class="reference external" href="https://www.python.org">Python</a> function sum is defined in file called <code class="docutils literal notranslate"><span class="pre">python_file.py</span></code> by invoking:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">idlv</span> <span class="n">file</span><span class="o">.</span><span class="n">asp</span> <span class="n">python_file</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>It will be obtained as output from I-DLV:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">compute_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>Notably, if in the program the following annotation is added:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@global_external_predicate_conversion</span><span class="p">(</span><span class="nd">@predicate</span><span class="o">=&amp;</span><span class="nb">sum</span><span class="p">,</span><span class="nd">@type</span><span class="o">=</span><span class="nd">@Q_CONST</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>Then, the unique answer sets of the program would be, instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">compute_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;3&quot;</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;4&quot;</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;4&quot;</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;5&quot;</span><span class="p">)</span><span class="o">.</span>
<span class="n">compute_sum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;6&quot;</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Basic/basic.html" class="btn btn-neutral float-left" title="About" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../Incremental/i2dlv.html" class="btn btn-neutral float-right" title="About" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, DeMaCS-Unical.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>